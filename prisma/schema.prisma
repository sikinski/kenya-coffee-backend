generator client {
    provider = "prisma-client-js"
}


datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id        Int      @id @default(autoincrement())
    name      String   @default("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    username  String   @unique
    password  String
    role      String   // "admin" –∏–ª–∏ "user"
    createdAt DateTime @default(now())
    daily_tasks DailyTask[] // <-- –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
    notes     Note[]    // üëà –¥–æ–±–∞–≤–∏–ª–∏ —Å–≤—è–∑—å —Å –∑–∞–º–µ—Ç–∫–∞–º–∏
    report      Report[]
}

model DailyTask {
    id        Int      @id @default(autoincrement())
    text      String   // —Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
    date      DateTime // –¥–∞—Ç–∞ –∑–∞–¥–∞—á–∏, –ø–µ—Ä–µ–¥–∞—ë–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
    done      Boolean  @default(false)
    userId    Int?// –ó–Ω–∞–∫ ? –≤ Prisma –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–ª–µ nullable, —Ç–æ –µ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å null. –ø–æ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º, –ø–æ–∑–∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º
    user      User?    @relation(fields: [userId], references: [id])  // <-- —Å–≤—è–∑—å —Å User
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Note {
    id          Int      @id @default(autoincrement())
    text        String
    author_id   Int
    author      User     @relation(fields: [author_id], references: [id])
    created_at  DateTime @default(now())
    updated_at  DateTime @updatedAt
    topicId    Int?                               // —Å–≤—è–∑—å —Å —Ç–µ–º–æ–π
    topic      NoteTopic? @relation(fields: [topicId], references: [id])
}

model NoteTopic {
    id     Int     @id @default(autoincrement())
    name   String  // –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã
    color  String  // —Ü–≤–µ—Ç (hex, rgb –∏–ª–∏ tailwind-class ‚Äî —Ä–µ—à–∏–º —Å–∞–º–∏)
    notes  Note[]
    created_at        DateTime @default(now())
}

model Report {
    id                Int @id @default(autoincrement())
    date              DateTime // <-- –¥–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞ (–æ–±–Ω—É–ª—è–µ–º –≤—Ä–µ–º—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏)
    cash              Decimal?
    non_cash          Decimal?
    total             Decimal?
    number_purchases  Int?
    cash_register     Decimal?
    userId            Int?
    user              User?    @relation(fields: [userId], references: [id])  // <-- —Å–≤—è–∑—å —Å User
    created_at        DateTime @default(now())
    updated_at        DateTime @updatedAt
}

model Receipt {
  id                 String   @id
  cashier_name       String
  discount           String?
  type               Int?
  customerInfo       Json?
  positions          Json?
  amount             Decimal
  calculationAddress String
  processedAt        String
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model NativeReceipt {
  id           String   @id @default(cuid())
  aqsiId       String?   @unique
  raw          Json
  processedAt  DateTime @default(now())
  createdAt    DateTime @default(now())
}
